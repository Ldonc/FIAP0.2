<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Formulário Interativo</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-900 transition-colors duration-300">

  <div class="min-h-screen flex flex-col items-center justify-center px-4">
    <button id="toggle-theme" class="mb-6 px-4 py-2 bg-gray-800 text-white rounded hover:bg-gray-700 transition">
      🌙 Modo Escuro
    </button>

    <form id="form" class="bg-white p-6 rounded-lg shadow-lg w-full max-w-md dark:bg-gray-800 dark:text-white" novalidate>
      <h2 class="text-2xl font-semibold mb-4">Cadastro</h2>

      <!-- Nome -->
      <div class="mb-4">
        <label for="nome" class="block mb-1 font-medium">Nome *</label>
        <input
          type="text"
          id="nome"
          required
          class="w-full px-3 py-2 border rounded outline-none transition-all focus:ring-2"
        />
        <p class="text-sm mt-1 h-5" id="nome-feedback"></p>
      </div>

      <!-- Email -->
      <div class="mb-4">
        <label for="email" class="block mb-1 font-medium">Email *</label>
        <input
          type="email"
          id="email"
          required
          class="w-full px-3 py-2 border rounded outline-none transition-all focus:ring-2"
        />
        <p class="text-sm mt-1 h-5" id="email-feedback"></p>
      </div>

      <!-- Checkbox -->
      <div class="mb-4 flex items-center gap-2">
        <input type="checkbox" id="termos" class="peer"/>
        <label for="termos" class="text-sm">Aceito os termos</label>
      </div>

      <!-- Botão -->
      <button
        type="submit"
        id="submit"
        disabled
        class="w-full py-2 bg-blue-500 text-white font-semibold rounded disabled:opacity-50 hover:bg-blue-600 transition"
      >
        Enviar
      </button>
    </form>
  </div>

  <script>
    const nomeInput = document.getElementById("nome");
    const emailInput = document.getElementById("email");
    const submitBtn = document.getElementById("submit");
    const checkbox = document.getElementById("termos");
    const form = document.getElementById("form");
    const toggleThemeBtn = document.getElementById("toggle-theme");

    const nomeFeedback = document.getElementById("nome-feedback");
    const emailFeedback = document.getElementById("email-feedback");

    const emailRegex = /^\S+@\S+\.\S+$/;

    function validateInput(input, feedback) {
      const value = input.value.trim();

      if (!value) {
        input.classList.remove("border-green-500", "focus:ring-green-500");
        input.classList.add("border-red-500", "focus:ring-red-500");
        feedback.textContent = "Campo obrigatório";
        feedback.className = "text-sm text-red-500 mt-1";
        return false;
      }

      if (input.type === "email" && !emailRegex.test(value)) {
        input.classList.remove("border-green-500", "focus:ring-green-500");
        input.classList.add("border-red-500", "focus:ring-red-500");
        feedback.textContent = "Email inválido";
        feedback.className = "text-sm text-red-500 mt-1";
        return false;
      }

      input.classList.remove("border-red-500", "focus:ring-red-500");
      input.classList.add("border-green-500", "focus:ring-green-500");
      feedback.textContent = "Tudo certo!";
      feedback.className = "text-sm text-green-500 mt-1";
      return true;
    }

    nomeInput.addEventListener("input", () => validateInput(nomeInput, nomeFeedback));
    emailInput.addEventListener("input", () => validateInput(emailInput, emailFeedback));

    checkbox.addEventListener("change", () => {
      submitBtn.disabled = !checkbox.checked;
    });

    form.addEventListener("submit", (e) => {
      e.preventDefault();

      const nomeValido = validateInput(nomeInput, nomeFeedback);
      const emailValido = validateInput(emailInput, emailFeedback);

      if (nomeValido && emailValido && checkbox.checked) {
        alert("Formulário enviado com sucesso!");
        form.reset();
        submitBtn.disabled = true;

        [nomeInput, emailInput].forEach(input => {
          input.classList.remove("border-red-500", "focus:ring-red-500", "border-green-500", "focus:ring-green-500");
        });

        nomeFeedback.textContent = "";
        emailFeedback.textContent = "";
      } else {
        alert("Preencha todos os campos corretamente.");
      }
    });

    // Dark mode toggle
    toggleThemeBtn.addEventListener("click", () => {
      document.documentElement.classList.toggle("dark");
      const isDark = document.documentElement.classList.contains("dark");
      toggleThemeBtn.textContent = isDark ? "☀️ Modo Claro" : "🌙 Modo Escuro";
    });
  </script>
</body>
</html>
